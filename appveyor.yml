
image: Visual Studio 2017

environment:
  baseVersion: 0.0.2-beta
#  buildVersion: '{packageVersion}.{build}'
#  nugetVersion: '{packageVersion}-beta-{build}'

init:
- ps: $env:buildVersion = "$env:baseVersion.$env:appveyor_build_number"
- ps: $env:nugetVersion = "$env:baseVersion-beta-$env:appveyor_build_number"
- ps: Update-AppveyorBuild -Version $env:buildVersion

version: '0.0.1.{build}'

dotnet_csproj:
  patch: true
  file: '**\*.csproj'
  version: '$(nugetVersion)'
  package_version: '$(nugetVersion)'
  assembly_version: '$(buildVersion)'
  file_version: '$(buildVersion)'
  informational_version: '$(nugetVersion)'

before_build:
- nuget restore
#build:
#  publish_nuget: true

configuration: Release
#platform: Any CPU

artifacts:
- path: '**\*.nupkg'
deploy:
  provider: NuGet
  api_key:
    secure: QVGLofIy2zySjb1ZW8e730tg6PxVB+++YvaJh/Dc54LA6h6u+2Cf4davQ9PPGn7E
  artifact: /.*\.nupkg/
  on:
    branch: master
