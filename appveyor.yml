image: Visual Studio 2017

version: 1.0.0.{build}
environment:
  packageVersion: 1.0.0

init:
- ps: $env:buildVersion = "$env:packageVersion.$env:appveyor_build_number"
- ps: $env:nugetVersion = "$env:packageVersion-beta-$env:appveyor_build_number"
- ps: Update-AppveyorBuild -Version $env:buildVersion

dotnet_csproj:
  patch: true
  file: '**\*.csproj'
  version: '$(nugetVersion)'
  package_version: '$(nugetVersion)'
  assembly_version: '$(buildVersion)'
  file_version: '$(buildVersion)'
  informational_version: '$(nugetVersion)'
before_build:
- nuget restore
#build:
#  project: TriggersTools.SharpUtils.sln      # path to Visual Studio solution or project
#  publish_nuget: true                        # package projects with .nuspec files and push to artifacts
configuration: Release
artifacts:
- path: '**\*.nupkg'
deploy:
  provider: NuGet
  api_key:
    secure: QVGLofIy2zySjb1ZW8e730tg6PxVB+++YvaJh/Dc54LA6h6u+2Cf4davQ9PPGn7E
  artifact: /.*\.nupkg/
  on:
    branch: master
